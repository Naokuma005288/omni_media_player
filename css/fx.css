/* === Omni Player: visual FX (backgrounds, overlays) === */
.opfx {
  position: absolute;
  inset: 0;
  z-index: 0;            /* video は z-index:1。背景はその下でOK */
  pointer-events: none;
  overflow: hidden;
}

/* 共通レイヤ */
.opfx .fx-layer {
  position: absolute;
  inset: -10%;
  filter: saturate(1.05);
  opacity: .55;
}

/* うっすらグラデ */
.opfx .grad {
  background: radial-gradient(1200px 800px at 20% 30%, rgba(45,126,247,.25), transparent 60%),
              radial-gradient(1200px 800px at 80% 70%, rgba(99,251,215,.18), transparent 60%),
              linear-gradient(180deg, rgba(0,0,0,.12), transparent 60%);
  animation: pan 22s linear infinite alternate;
}

/* 粒子ノイズ（ほぼ静止の質感） */
.opfx .grain {
  opacity: .08;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 420px 420px;
  animation: jitter 1.6s steps(2,end) infinite;
}

/* 微弱な縁取りのビネット */
.opfx::after {
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(120% 120% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,.35) 95%);
  pointer-events:none;
}

/* ==== Presets ==== */
.opfx.preset-minimal .grad { opacity:.42 }
.opfx.preset-clean   .grain { display:none }
.opfx.preset-glow    .grad { filter: blur(16px) saturate(1.2); opacity:.6 }
.opfx.preset-neon    .grad { filter: blur(18px) saturate(1.35) brightness(1.05); opacity:.68 }

/* ==== Spectrum canvas（JS が付与する class） ==== */
.opspec-canvas {
  position:absolute; inset:0;
  z-index:2;               /* video(1) と control-bar(10) の間でもOKだが pointer-events: none で透過 */
  pointer-events:none;
  mix-blend-mode: screen;  /* 映像に馴染ませる */
  opacity:.92;
  transition: opacity .25s ease;
}
.opspec-hidden { opacity: 0 }

/* ==== Anims ==== */
@keyframes pan {
  0%   { transform: translate3d(-2%, -2%, 0) scale(1.02) }
  100% { transform: translate3d( 2%,  2%, 0) scale(1.02) }
}
@keyframes jitter {
  0%   { transform: translate3d(0,0,0) }
  100% { transform: translate3d(-1px,1px,0) }
}
